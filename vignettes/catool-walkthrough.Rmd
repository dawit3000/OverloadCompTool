---
title: "catool: Walkthrough"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{catool: Walkthrough}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
library(catool)
library(dplyr)
```

## üîç Introduction

This vignette demonstrates how to use the `catool` R package to calculate fair and transparent overload compensation for college instructors, based on institutional course schedules and compensation policies.

The package supports analysis for both individual instructors and full teaching schedules using well-defined eligibility and proration rules based on enrollment and credit hour thresholds.

---

## üè´ Prepare Your Schedule Data

To use `catool`, your schedule data must include at minimum:

* `INSTRUCTOR`: Instructor name (e.g., "Smith, John")
* `ENRLD`: Enrollment count for each course
* `HRS`: Credit hours for each course

You can import data from a `.csv` file using `read.csv("yourfile.csv")`. Here's a small example:

```{r, echo=TRUE, results="hide"}
schedule <- data.frame(
  INSTRUCTOR = c("Lalau-Hitchcock, Diksha", "Lalau-Hitchcock, Diksha", "Smith, John"),
  ENRLD = c(12, 7, 4),
  HRS = c(3, 3, 3),
  stringsAsFactors = FALSE
)
```

---

## üë§ Analyze One Instructor

```{r, echo=TRUE, results="hide"}
# Filter by instructor name (case-insensitive)
inst_schedule <- get_instructor_schedule("Lalau-Hitchcock", schedule)

# Calculate overload compensation using default policy
ol_comp(inst_schedule)

# You can also apply custom policy parameters
ol_comp(inst_schedule, L = 4, U = 8, reg_load = 9, rate_per_cr = 5000 / 3)
```

---

## üë• See All Instructors in the Schedule

```{r, echo=TRUE, results="hide"}
get_unique_instructors(schedule)
```

---

## üî¢ Analyze by Instructor Index

```{r, echo=TRUE, results="hide"}
# Get summary for a specific instructor by index
ol_comp_byindex(1, schedule_df = schedule)

# With custom policy
ol_comp_byindex(1, schedule_df = schedule, L = 4, U = 9, reg_load = 12, rate_per_cr = 2500 / 3)
```

---

## üìã Summarize All Instructors

```{r, echo=TRUE, results="hide"}
ol_comp_summary(schedule)

# With custom institutional policy
ol_comp_summary(schedule, L = 4, U = 9, reg_load = 12, rate_per_cr = 2500 / 3)
```

---

## üßÆ Explanation of Policy Rules

The overload compensation algorithm in **catool** reflects typical institutional policy logic designed to ensure fairness and consistency.

### üí° Policy Parameters

* **`ENRLD`**: Course enrollment
* **`HRS`**: Credit hours per course
* **`reg_load`**: Regular teaching load (default = 12 credit hours)
* **`rate_per_cr`**: Compensation per qualified credit hour (default = 2500 / 3)

### ‚öñÔ∏è Key Rules

1. **Qualified Credit Hours**
   Only credit hours exceeding the instructor‚Äôs regular load (`reg_load`) are eligible for overload pay.

2. **Enrollment-Based Eligibility**

   * Courses with `ENRLD < L` (default `L = 4`) are excluded from compensation.
   * If **enrollment corresponding to qualified credit hours is less than 10**, pay is **prorated**.
   * If **enrollment is 10 or more**, pay is awarded in full.

3. **Fair Distribution**

   * Courses are sorted by enrollment in **descending order**.
   * Qualified hours are counted from the **least-enrolled eligible course upward**, ensuring the most populated classes are taught as part of the regular load.
     This reflects standard policy assumptions: institutions prioritize assigning higher-impact (larger) courses to regular load, and identify overload from less-enrolled offerings.

---

## üì´ Questions?

For questions or feedback, please open a [GitHub issue](https://github.com/dawit3000/catool/issues)
or contact **Dawit Aberra** at [aberrad@fvsu.edu](mailto:aberrad@fvsu.edu).
